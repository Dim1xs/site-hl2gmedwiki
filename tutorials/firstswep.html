<p style="padding-left: 120px;"><a href="..\index.html">Return to Main Page</a></p>
<p style="padding-left: 90px; text-align: center;"><span style="font-size: 26px;"><strong>Creating your first <u>S</u>cripted&nbsp;<u>W</u>eapon</strong></span><br /> <span style="font-size: 16px;">Description: Guide to create SWep.<br /> Author: Dim1xs (not a professional in creating)</span></p>
<p style="padding-left: 90px; text-align: center;">&nbsp;</p>
<p style="padding-left: 90px; text-align: center;"><strong><span style="font-size: 26px;">READ THIS!</span></strong></p>
<p style="padding-left: 90px; text-align: center;"><span style="font-size: 16px;">The tutorial may not be perfect, because im still dont know all lua func.</span></p>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 26px;"><strong>Get started</strong></span></p>
<p style="padding-left: 90px; text-align: center;"><span style="font-size: 16px;">First of all, you need a program, that can open and edit <u><strong>Lua</strong></u> format files.<br /> Go to the directory (folder): <em>&lt;srceng&gt;/hl2/custom/hl2gmed/lua/weapons/</em></span></p>
<p style="padding-left: 90px; text-align: center;"><span style="font-size: 16px;">Now create a new directory, with a simple name (without spaces) for your weapon. (for example: weapon_thrower)<br /> I recommend naming the folder so that there is a prefix at the beginning: weapon_</span></p>
<p style="padding-left: 90px; text-align: center;"><span style="font-size: 16px;">I advise you to do this, because the game may have the same prefixes, and the game may break because of this.</span></p>
<p style="padding-left: 90px; text-align: center;">&nbsp;</p>
<p style="padding-left: 510px; text-align: left;"><strong><span style="font-size: 26px;">Main part</span></strong></p>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 16px;">in folder that you created, you need to create 3 files:</span><br /> ðŸ”µ<span style="font-size: 18px;"><strong>init.lua</strong></span></p>
<p style="padding-left: 510px; text-align: left;">ðŸ”µ<span style="font-size: 18px;"><strong>cl_</strong></span><span style="font-size: 18px;"><strong>init.lua</strong></span></p>
<p style="padding-left: 510px; text-align: left;">ðŸ”µ<span style="font-size: 18px;"><strong>shared.</strong></span><span style="font-size: 18px;"><strong>lua</strong></span></p>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 16px;"><strong>init.lua</strong>&nbsp;is run&nbsp;<strong><em>Serverside</em> </strong>functions.</span></p>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 16px;"><strong>cl_init.lua&nbsp;</strong>is run&nbsp;<strong><em>Clientside</em> </strong>functions.</span></p>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 16px;"><strong>shared.lua</strong>&nbsp;is run in both environments (<em><strong>server/clientside</strong></em>).</span></p>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 16px;">Simply put the serverside/clientside code inside an if statement like so:</span></p>
<pre style="padding-left: 540px;"><code><span style="background-color: #999999;"> 
if SERVER then
    -- Serverside code --
end
 
if CLIENT then
    -- Clientside code --
end
</span> <br /><br /><br /></code></pre>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 16px;">Now, for perfect work you have to open <strong>cl_init.lua </strong>and put here basic code:<br /><br /></span></p>
<p style="padding-left: 540px;"><span style="background-color: #999999;">include( "shared.lua" ) --Must be here, for normal client initialize without errors.<br /></span></p>
<p style="padding-left: 540px;"><span style="background-color: #999999;">function SWEP:DrawLargeWeaponBox( bSelected, xpos, ypos, boxWide, boxTall, selectedColor, alpha, number ) --Must be here so that it does not give an error.</span><br /><span style="background-color: #999999;">end</span></p>
<p style="padding-left: 540px;"><span style="background-color: #999999;">function SWEP:DrawModel( flags )</span><br /><span style="background-color: #999999;">end</span></p>
<p style="padding-left: 540px;"><span style="background-color: #999999;">function SWEP:MuzzleFlash( pos1, angles, type, firstPerson )</span><br /><span style="background-color: #999999;">end</span></p>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 16px;">Now same for <strong>init.lua</strong>:<br /></span></p>
<p style="padding-left: 540px;"><span style="background-color: #999999;">include( "shared.lua" ) --Must be here, for normal server initialize without errors.<br /></span></p>
<p style="padding-left: 540px;"><span style="background-color: #999999;">function SWEP:CapabilitiesGet()</span><br /><span style="background-color: #999999;">end</span></p>
<p style="padding-left: 540px; text-align: left;">&nbsp;</p>
<h2 style="padding-left: 510px;">SWEP Functions</h2>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 16px;">Okay so, you must put a basic functions like Name, Viewmodel, Worldmodel, so for that you can use same functions like in GMOD:</span></p>
<p style="text-align: left;"><span style="font-size: 16px;">&nbsp;</span></p>
<pre style="padding-left: 540px;"><code><span style="background-color: #999999;"> 
SWEP.Name = "Base Weapon"
SWEP.PrintName				= "#HL2_357Handgun"
SWEP.ViewModel			= "models/weapons/v_357.mdl"
SWEP.WorldModel			= "models/weapons/w_357.mdl"
SWEP.HoldType			= "python"
SWEP.Slot				= 1
SWEP.SlotPos		= 1
SWEP.Weight					= 7
SWEP.item_flags				= 0
SWEP.AutoSwitchTo			= 1
SWEP.AutoSwitchFrom			= 1
SWEP.BuiltRightHanded		= 0
SWEP.AllowFlipping				= 0 --actually does the same like ViewModelFlip in gmod.
SWEP.MeleeWeapon			= 0 --idk what it does.
SWEP.Spawnable 				   	= true
</span> <br /><br /><br /></code></pre>
<h2 style="padding-left: 510px;">Firearm Settings</h2>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 16px;">Each weapon must have its parameters configured (cartridges, magazine stock, initial ammunition, type of cartridges)</span></p>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 16px;">Fortunately, in this lua, the ammo def functions work the same way as in gmod, which means that they are tables, and I can show you 2 ways for setting up ammo.</span></p>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 16px;">First way, is making in like in default gmod swep:</span></p>
<pre style="padding-left: 540px;"><code><span style="background-color: #999999;"> 
--This determins how big each clip/magazine for the gun is. You can 
--set it to -1 to disable the ammo system, meaning primary ammo will 
--not be displayed and will not be affected.
SWEP.Primary.ClipSize = 126

--This sets the number of rounds in the clip when you first get the gun. Again it can be set to -1.
SWEP.Primary.DefaultClip = 126

--Obvious. Determines whether the primary fire is automatic. This should be true/false
SWEP.Primary.Automatic = false

--Sets the ammunition type the gun uses, see below for a list of types.
SWEP.Primary.Ammo = "357

SWEP.Secondary.ClipSize = -1
SWEP.Secondary.DefaultClip = -1
SWEP.Secondary.Automatic = false
SWEP.Secondary.Ammo = "None"
</span> <br /><br /><br /></code></pre>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 16px;">And here is the second way:</span></p>
<pre style="padding-left: 540px;"><code><span style="background-color: #999999;"> 
SWEP.Primary = 
{
	ClipSize=126,
	DefaultClip=126,
	Automatic = false,
	Ammo = "357",
}
SWEP.Secondary = 
{
	ClipSize=-1,
	DefaultClip=-1,
	Automatic = false,
	Ammo = "none",
}
</span> <br /><br /><br /></code></pre>
<p style="padding-left: 510px; text-align: left;"><span style="font-size: 16px;">I like the second way better, it looks clearer to me. </span></p>